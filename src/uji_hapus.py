from utilities import number_modification , string_modification
 
my_orders_status=   [
    {'trade_seq': 12078662, 'trade_id': 'ETH-17763930', 'timestamp': 1673694823783, 'tick_direction': 0, 'state': 'filled', 'self_trade': False, 'risk_reducing': False, 'reduce_only': False, 'profit_loss': 0.0, 'price': 1533.55, 'post_only': True, 'order_type': 'limit', 'order_id': 'ETH-3250555989', 'mmp': False, 'matching_id': None, 'mark_price': 1534.27, 'liquidity': 'M', 'label': 'hedgingSpot-open-1673694822', 'instrument_name': 'ETH-PERPETUAL', 'index_price': 1533.01, 'fee_currency': 'ETH', 'fee': 0.0, 'direction': 'sell', 'api': True, 'amount': 53.0}, {'trade_seq': 12078736, 'trade_id': 'ETH-17765296', 'timestamp': 1673695318941, 'tick_direction': 0, 'state': 'filled', 'self_trade': False, 'risk_reducing': False, 'reduce_only': False, 'profit_loss': 0.0, 'price': 1531.15, 'post_only': True, 'order_type': 'limit', 'order_id': 'ETH-3250582400', 'mmp': False, 'matching_id': None, 'mark_price': 1531.93, 'liquidity': 'M', 'label': 'hedgingSpot-open-1673695309', 'instrument_name': 'ETH-PERPETUAL', 'index_price': 1530.68, 'fee_currency': 'ETH', 'fee': 0.0, 'direction': 'sell', 'api': True, 'amount': 53.0}, {'trade_seq': 12078738, 'trade_id': 'ETH-17765733', 'timestamp': 1673695503994, 'tick_direction': 0, 'state': 'filled', 'self_trade': False, 'risk_reducing': False, 'reduce_only': False, 'profit_loss': 0.0, 'price': 1531.75, 'post_only': True, 'order_type': 'limit', 'order_id': 'ETH-3250584017', 'mmp': False, 'matching_id': None, 'mark_price': 1531.58, 'liquidity': 'M', 'label': 'hedgingSpot-open-1673695339', 'instrument_name': 'ETH-PERPETUAL', 'index_price': 1531.59, 'fee_currency': 'ETH', 'fee': 0.0, 'direction': 'sell', 'api': True, 'amount': 18.0},
    
    {'trade_seq': 12078679, 'trade_id': 'ETH-17764047', 'timestamp': 1673694863785, 'tick_direction': 0, 'state': 'filled', 'self_trade': False, 'risk_reducing': False, 'reduce_only': False, 'profit_loss': 0.0, 'price': 1533.85, 'post_only': True, 'order_type': 'limit', 'order_id': 'ETH-3250557567', 'mmp': False, 'matching_id': None, 'mark_price': 1534.29, 'liquidity': 'M', 'label': 'hedgingSpot-open-1673694853', 'instrument_name': 'ETH-PERPETUAL', 'index_price': 1533.45, 'fee_currency': 'ETH', 'fee': 0.0, 'direction': 'sell', 'api': True, 'amount': 53.0}, 
    {'trade_seq': 12078742, 'trade_id': 'ETH-17767600', 'timestamp': 1673696299169, 'tick_direction': 2, 'state': 'filled', 'self_trade': False, 'risk_reducing': False, 'reduce_only': False, 'profit_loss': 9.699e-05, 'price': 1528.45, 'post_only': True, 'order_type': 'limit', 'order_id': 'ETH-3250631458', 'mmp': False, 'matching_id': None, 'mark_price': 1528.51, 'liquidity': 'M', 'label': 'hedgingSpot-closed-1673694853', 'instrument_name': 'ETH-PERPETUAL', 'index_price': 1528.71, 'fee_currency': 'ETH', 'fee': 0.0, 'direction': 'buy', 'api': True, 'amount': 53.0}]
label = 'hedgingSpot'
my_trades_label = ([o for o in my_orders_status if label in o['label'] ])
result = number_modification.net_position (my_trades_label)
#print(result)
data_order = [{'trade_seq': 12078742, 'trade_id': 'ETH-17767600', 'timestamp': 1673696299169, 'tick_direction': 2, 'state': 'filled', 'self_trade': False, 'risk_reducing': False, 'reduce_only': False, 'profit_loss': 9.699e-05, 'price': 1528.45, 'post_only': True, 'order_type': 'limit', 'order_id': 'ETH-3250631458', 'mmp': False, 'matching_id': None, 'mark_price': 1528.51, 'liquidity': 'M', 'label': 'hedgingSpot-closed-1673694853', 'instrument_name': 'ETH-PERPETUAL', 'index_price': 1528.71, 'fee_currency': 'ETH', 'fee': 0.0, 'direction': 'buy', 'api': True, 'amount': 53.0}]
label_id= data_order [0]['label']

closed_label_id_int = string_modification.extract_integers_from_text(label_id)
remaining_open_trades = ([o for o in my_orders_status if  str(closed_label_id_int)  not in o['label'] ]) 
print(remaining_open_trades)

[{'trade_seq': 12078662, 'trade_id': 'ETH-17763930', 'timestamp': 1673694823783, 'tick_direction': 0, 'state': 'filled', 'self_trade': False, 'risk_reducing': False, 'reduce_only': False, 'profit_loss': 0.0, 'price': 1533.55, 'post_only': True, 'order_type': 'limit', 'order_id': 'ETH-3250555989', 'mmp': False, 'matching_id': None, 'mark_price': 1534.27, 'liquidity': 'M', 'label': 'hedgingSpot-open-1673694822', 'instrument_name': 'ETH-PERPETUAL', 'index_price': 1533.01, 'fee_currency': 'ETH', 'fee': 0.0, 'direction': 'sell', 'api': True, 'amount': 53.0}, {'trade_seq': 12078736, 'trade_id': 'ETH-17765296', 'timestamp': 1673695318941, 'tick_direction': 0, 'state': 'filled', 'self_trade': False, 'risk_reducing': False, 'reduce_only': False, 'profit_loss': 0.0, 'price': 1531.15, 'post_only': True, 'order_type': 'limit', 'order_id': 'ETH-3250582400', 'mmp': False, 'matching_id': None, 'mark_price': 1531.93, 'liquidity': 'M', 'label': 'hedgingSpot-open-1673695309', 'instrument_name': 'ETH-PERPETUAL', 'index_price': 1530.68, 'fee_currency': 'ETH', 'fee': 0.0, 'direction': 'sell', 'api': True, 'amount': 53.0}, {'trade_seq': 12078738, 'trade_id': 'ETH-17765733', 'timestamp': 1673695503994, 'tick_direction': 0, 'state': 'filled', 
'self_trade': False, 'risk_reducing': False, 'reduce_only': False, 'profit_loss': 0.0, 'price': 1531.75, 'post_only': True, 'order_type': 'limit', 'order_id': 'ETH-3250584017', 
'mmp': False, 'matching_id': None, 'mark_price': 1531.58, 'liquidity': 'M', 'label': 'hedgingSpot-open-1673695339', 'instrument_name': 'ETH-PERPETUAL', 'index_price': 1531.59, 'fee_currency': 'ETH', 'fee': 0.0, 'direction': 'sell', 'api': True, 'amount': 18.0}]
