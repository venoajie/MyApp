from utilities import string_modification, number_modification, pickling, system_tools
from configuration import config

# from loguru import logger as log
my_trades_open = [
    {'trade_seq': 119459281, 'trade_id': 'ETH-162634254', 'timestamp': 1678610180143, 'tick_direction': 0, 'state': 'filled', 'self_trade': False, 'risk_reducing': False, 'reduce_only': False, 'profit_loss': 0.0, 'price': 1473.05, 'post_only': True, 'order_type': 'limit', 'order_id': 'ETH-32205761779', 'mmp': False, 'matching_id': None, 'mark_price': 1472.79, 'liquidity': 'M', 'label': 'hedgingSpot-open-1678610144572', 'instrument_name': 'ETH-PERPETUAL', 'index_price': 1474.68, 'fee_currency': 'ETH', 'fee': 0.0, 'direction': 'sell', 'api': True, 'amount': 78.0}, {'trade_seq': 119653801, 'trade_id': 'ETH-162909430', 'timestamp': 1678706775993, 'tick_direction': 1, 'state': 'filled', 'self_trade': False, 'risk_reducing': False, 'reduce_only': False, 'profit_loss': 0.0, 'price': 1583.75, 'post_only': True, 'order_type': 'limit', 'order_id': 'ETH-32231983208', 'mmp': False, 'matching_id': None, 'mark_price': 1583.81, 'liquidity': 'M', 'label': 'hedgingSpot-open-1678706775367', 'instrument_name': 'ETH-PERPETUAL', 'index_price': 1583.99, 'fee_currency': 'ETH', 'fee': 0.0, 'direction': 'sell', 'api': True, 'amount': 5.0}, {'trade_seq': 119665688, 'trade_id': 'ETH-162925875', 'timestamp': 1678713118256, 'tick_direction': 0, 'state': 'filled', 'self_trade': False, 'risk_reducing': False, 'reduce_only': False, 'profit_loss': 0.0, 'price': 1598.0, 'post_only': True, 'order_type': 'limit', 'order_id': 'ETH-32234303212', 'mmp': False, 'matching_id': None, 'mark_price': 1597.73, 'liquidity': 'M', 'label': 'hedgingSpot-open-1678713106585', 'instrument_name': 'ETH-PERPETUAL', 'index_price': 1597.86, 'fee_currency': 'ETH', 'fee': 0.0, 'direction': 'sell', 'api': True, 'amount': 1.0}, {'trade_seq': 119736857, 'trade_id': 'ETH-163020718', 'timestamp': 1678727097665, 'tick_direction': 0, 'state': 'filled', 'self_trade': False, 'risk_reducing': False, 'reduce_only': False, 'profit_loss': 0.0, 'price': 1666.15, 'post_only': True, 'order_type': 'limit', 'order_id': 'ETH-32243915623', 'mmp': False, 'matching_id': None, 'mark_price': 1666.07, 'liquidity': 'M', 'label': 'hedgingSpot-open-1678727089260', 'instrument_name': 'ETH-PERPETUAL', 'index_price': 1666.08, 'fee_currency': 'ETH', 'fee': 0.0, 'direction': 'sell', 'api': True, 'amount': 4.0}, {'trade_seq': 119736858, 'trade_id': 'ETH-163020719', 'timestamp': 1678727097665, 'tick_direction': 1, 'state': 'filled', 'self_trade': False, 'risk_reducing': False, 'reduce_only': False, 'profit_loss': 0.0, 'price': 1666.15, 'post_only': True, 'order_type': 'limit', 'order_id': 'ETH-32243915636', 'mmp': False, 'matching_id': None, 'mark_price': 1666.07, 'liquidity': 'M', 'label': 'hedgingSpot-open-1678727089307', 'instrument_name': 'ETH-PERPETUAL', 'index_price': 1666.08, 'fee_currency': 'ETH', 'fee': 0.0, 'direction': 'sell', 'api': True, 'amount': 4.0}, {'trade_seq': 119736859, 'trade_id': 'ETH-163020720', 'timestamp': 1678727097665, 'tick_direction': 1, 'state': 'filled', 'self_trade': False, 'risk_reducing': False, 'reduce_only': False, 'profit_loss': 0.0, 'price': 1666.15, 'post_only': True, 'order_type': 'limit', 'order_id': 'ETH-32243915644', 'mmp': False, 'matching_id': None, 'mark_price': 1666.07, 'liquidity': 'M', 'label': 'hedgingSpot-open-1678727089354', 'instrument_name': 'ETH-PERPETUAL', 'index_price': 1666.08, 'fee_currency': 'ETH', 'fee': 0.0, 'direction': 'sell', 'api': True, 'amount': 4.0}, {'trade_seq': 119773081, 'trade_id': 'ETH-163068627', 'timestamp': 1678755677524, 'tick_direction': 3, 'state': 'filled', 'self_trade': False, 'risk_reducing': False, 'reduce_only': False, 'profit_loss': 0.0, 'price': 1671.55, 'post_only': True, 'order_type': 'limit', 'order_id': 'ETH-32252020677', 'mmp': False, 'matching_id': None, 'mark_price': 1671.66, 'liquidity': 'M', 'label': 'hedgingSpot-open-1678755675478', 'instrument_name': 'ETH-PERPETUAL', 'index_price': 1673.29, 'fee_currency': 'ETH', 'fee': 0.0, 'direction': 'sell', 'api': True, 'amount': 68.0}, {'trade_seq': 119946512, 'trade_id': 'ETH-163294790', 'timestamp': 1678828105145, 'tick_direction': 1, 'state': 'filled', 'self_trade': False, 'risk_reducing': False, 'reduce_only': False, 'profit_loss': 0.0, 'price': 1679.8, 'post_only': True, 'order_type': 'limit', 'order_id': 'ETH-32281785727', 'mmp': False, 'matching_id': None, 'mark_price': 1679.01, 'liquidity': 'M', 'label': 'supplyDemandShort60-open-1678828104726', 'instrument_name': 'ETH-PERPETUAL', 'index_price': 1677.09, 'fee_currency': 'ETH', 'fee': 0.0, 'direction': 'sell', 'api': True, 'amount': 10.0}, {'trade_seq': 120015629, 'trade_id': 'ETH-163380400', 'timestamp': 1678880514061, 'tick_direction': 2, 'state': 'filled', 'self_trade': False, 'risk_reducing': False, 'reduce_only': False, 'profit_loss': 0.0, 'price': 1675.4, 'post_only': True, 'order_type': 'limit', 'order_id': 'ETH-32297101093', 'mmp': False, 'matching_id': None, 'mark_price': 1675.76, 'liquidity': 'M', 'label': 'hedgingSpot-open-1678880511772', 'instrument_name': 'ETH-PERPETUAL', 'index_price': 1676.02, 'fee_currency': 'ETH', 'fee': 0.0, 'direction': 'sell', 'api': True, 'amount': 78.0}
    ]


my_trades_path = system_tools.provide_path_for_file("myTrades", "eth", "open")
pickling.replace_data(my_trades_path, my_trades_open, True)


my_trades_path_open_recovery = system_tools.provide_path_for_file(
    "myTrades", "eth", "open-recovery-point"
)
pickling.replace_data(my_trades_path_open_recovery, my_trades_open, True)

net = number_modification.net_position(my_trades_open)
print(f" ALL {net}")

