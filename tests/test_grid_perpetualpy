# -*- coding: utf-8 -*-
import strategies.grid_perpetual as grid
import asyncio
import pytest


my_trades_open_sqlite: list
orders_from_sqlite: list
notional: float
active_trade_item: list = None
stratey_from_config: str = None

grid = grid.GridPerpetual(my_trades_open_sqlite, 
                          orders_from_sqlite, 
                          notional, 
                          active_trade_item, 
                          stratey_from_config
                          )



@pytest.mark.asyncio
async def test_get_user_trades_by_instrument():
    user_trades_by_instrument = await get_dbt.get_user_trades_by_instrument(
        connection_url, client_id, client_secret, "eth-perpetual"
    )

    assert list(user_trades_by_instrument) == [
        "jsonrpc",
        "id",
        "result",
        "usIn",
        "usOut",
        "usDiff",
        "testnet",
    ]
